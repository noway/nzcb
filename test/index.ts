import { expect } from "chai";
import { ethers } from "hardhat";

describe("Greeter", function () {
  it("Should return the new greeting once it's changed", async function () {
    const Greeter = await ethers.getContractFactory("Greeter");
    const greeter = await Greeter.deploy("NZ COVID Badge", "NZCP");
    await greeter.deployed();

    const a: [bigint, bigint] = [5705644466879217538218526450492165961464580271415653572212474686262364576390n,5303178026912613573981958416327353670836432279330963733881122407748414610030n]

    const b: [[bigint, bigint],[bigint, bigint]] = [[15421307304103513447721158302160650395503089119159821582856917649033738344260n,17185608128791938336377772411578068242184076699769804498038410078034859038425n],[11353368855160761406708943934147512318001712779669106005924662572718179890522n,128509955073080224169103555483236613013518609867212194516559805759814439175n]]

    const c: [bigint, bigint] = [8099373155549664519875567458916997711939736403824288309683539375995244597725n,8832331497446014834338857444288760740818900440051209341068916178690072847359n]

    const input: [bigint, bigint, bigint] = [332803489704591243828114355286261993890678185647226483553216796488284950010n,240632669724126768245081263063289290029698925475588899341139051131709220053n,280524204068663508871754421270798111325477705489633122091431887n]

    const messageHash = "0x271CE33D671A2D3B816D788135F4343E14BC66802F8CD841FAAC939E8C11F3EE";

    const r = "0xD2E07B1DD7263D833166BDBB4F1A093837A905D7ECA2EE836B6B2ADA23C23154";
    const s = "0xFBA88A529F675D6686EE632B09EC581AB08F72B458904BB3396D10FA66D11477";


    const setGreetingTx = await greeter.mint(a, b, c, input, messageHash, [r, s])

    await setGreetingTx.wait();

    expect(await greeter.tokenURI(0)).to.equal("https://i.imgur.com/QYKQsql.jpg");
  });
});
